<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Лабораторная №9 – Fetch API</title>
<style>
  body { font-family: Arial; margin: 30px; }
  table { border-collapse: collapse; width: 100%; }
  th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }
  #loader { color: blue; font-weight: bold; }
  button { margin-top: 10px; padding: 8px 12px; }
</style>
</head>
<body>
<h2>Список пользователей</h2>
<div id="loader"></div>
<table id="userTable">
  <thead>
    <tr><th>ID</th><th>Имя</th><th>Email</th><th>Город</th></tr>
  </thead>
  <tbody></tbody>
</table>
<button id="reload">Обновить данные</button>

<script>
async function loadUsers() {
  const loader = document.getElementById('loader');
  const tbody = document.querySelector('#userTable tbody');
  loader.textContent = 'Загрузка данных...';
  tbody.innerHTML = '';

  try {
    const response = await fetch('https://jsonplaceholder.typicode.com/users');
    if (!response.ok) throw new Error('Ошибка сети');
    const users = await response.json();

    users.forEach(u => {
      const row = `
        <tr>
          <td>${u.id}</td>
          <td>${u.name}</td>
          <td>${u.email}</td>
          <td>${u.address.city}</td>
        </tr>`;
      tbody.insertAdjacentHTML('beforeend', row);
    });

    loader.textContent = '';
  } catch (error) {
    loader.textContent = 'Ошибка при получении данных.';
    console.error(error);
  }
}

document.getElementById('reload').addEventListener('click', loadUsers);
loadUsers();
</script>
</body>
</html>
